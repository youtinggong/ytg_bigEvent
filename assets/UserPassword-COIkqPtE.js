import{r as u,u as P,c,b as t,a as h,o as U,d as r,h as m,b$ as F,E as R}from"./index-CS-6Rb6g.js";import{a as x,E as C}from"./el-col-DRcXhEIq.js";import{E as y,a as N}from"./el-form-item-BrDlOyyr.js";import{E as b}from"./_plugin-vue_export-helper-u328es9E.js";import{E as B}from"./el-input-x7G_QJDB.js";import{P as S}from"./PageContainer-D-wUjDNd.js";import"./el-message-HN8d9Jlk.js";const H={__name:"UserPassword",setup(I){const n=u(),l=u({old_pwd:"",new_pwd:"",re_pwd:""}),_={old_pwd:[{validator:(a,e,o)=>{e?e.length<6||e.length>15?o(new Error("密码长度应为6-15位")):e===l.value.new_pwd?o(new Error("原密码和新密码不能相同")):o():o(new Error("请输入原密码"))},trigger:"blur"}],new_pwd:[{validator:(a,e,o)=>{e?e.length<6||e.length>15?o(new Error("密码长度应为6-15位")):o():o(new Error("请输入新密码"))},trigger:"blur"}],re_pwd:[{validator:(a,e,o)=>{e?e.length<6||e.length>15?o(new Error("密码长度应为6-15位")):e!==l.value.new_pwd?o(new Error("两次输入的密码不一致")):o():o(new Error("请确认新密码"))},trigger:"blur"}]},p=P(),i=h(),f=async()=>{await n.value.validate(),await F(l.value),R.success("修改密码成功"),p.setToken(""),p.setUser({}),i.push("/login")},E=()=>{n.value.resetFields()};return(a,e)=>{const o=B,d=N,w=b,g=y,v=C,V=x;return U(),c(S,{title:"修改密码"},{default:t(()=>[r(V,null,{default:t(()=>[r(v,{span:12},{default:t(()=>[r(g,{ref_key:"formRef",ref:n,model:l.value,rules:_,"label-width":"100px"},{default:t(()=>[r(d,{label:"原密码",prop:"old_pwd"},{default:t(()=>[r(o,{modelValue:l.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.old_pwd=s),"show-password":"",placeholder:"请输入原密码"},null,8,["modelValue"])]),_:1}),r(d,{label:"新密码",prop:"new_pwd"},{default:t(()=>[r(o,{modelValue:l.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.new_pwd=s),"show-password":"",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),r(d,{label:"确认密码",prop:"re_pwd"},{default:t(()=>[r(o,{modelValue:l.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.re_pwd=s),"show-password":"",placeholder:"请再次输入新密码"},null,8,["modelValue"])]),_:1}),r(d,null,{default:t(()=>[r(w,{type:"primary",onClick:f},{default:t(()=>e[3]||(e[3]=[m("修改密码")])),_:1}),r(w,{onClick:E},{default:t(()=>e[4]||(e[4]=[m("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}};export{H as default};
